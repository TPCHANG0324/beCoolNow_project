<template>
  <MainHeader></MainHeader>
  <div class="si_container_R">
    <div class="Sp-checkout-nav-X">
                  <!-- æ¯ä¸€å€‹åœ“åœˆ -->
                  <div class="Sp-step-X">
                      <span class="Sp-badge-X">
                          <div class="Sp-badge-text-X">1</div>
                      </span>
                      <span>è³¼ç‰©è»Š</span>
                  </div>

                  <div class="Sp-step-X active">
                      <span class="Sp-badge-X">
                          <div class="Sp-badge-text-X">2</div>
                      </span>
                      <span>å¡«å¯«è³‡æ–™</span>
                  </div>

                  <div class="Sp-step-X">
                      <span class="Sp-badge-X">
                          <div class="Sp-badge-text-X">3</div>
                      </span>
                      <span>è³¼è²·å®Œæˆ</span>
                  </div>
              </div>
    <div class="si_content_R">

      <!-- <nav class="breadcrumb">
        <ol>
          <li><a href="#">é¦–é </a></li>
          &nbsp;&gt;&nbsp;
          <li>NT$100~$200</li>
        </ol>
      </nav> -->
      <!-- æ­¥é©Ÿé€²åº¦æ¢ -->
      <!-- div... -->
      <!-- åˆè¨ˆ -->
      <div class="si_ordersummary_R">
        <!-- é ­éƒ¨å€åŸŸ -->
        <div class="si_orderhead_R">
          <h2>åˆè¨ˆ:NT$600</h2>
          <!-- é»æ“Š p.toggle-details åˆ‡æ›æ˜ç´°é¡¯ç¤º/éš±è— -->
          <p class="toggle-details" @click="toggleDetails">
            è³¼ç‰©è»Š(1ä»¶)
            <!-- ä¾æ“šæ˜¯å¦å±•é–‹ä¾†åˆ‡æ› icon -->
            <i :class="[`fa-solid`, isOpen ? 'fa-angle-up' : 'fa-angle-down']"></i>
          </p>
        </div>

        <!-- æ˜ç´°å€åŸŸ -->
        <transition name="slide-fade">
          <div v-if="isOpen" class="si_orderdetails_R">
            <!-- å•†å“è³‡æ–™ -->
            <div class="si_orderbottom1_R">
              <div class="item1">å•†å“è³‡æ–™</div>
              <div class="item2">å„ªæƒ </div>
              <div class="item3">å–®ä»¶åƒ¹æ ¼</div>
              <div class="item4">æ•¸é‡</div>
              <div class="item5">å°è¨ˆ</div>
            </div>

            <div class="si_orderbottom2_R">
              <div class="middle_item1">
                <a href="#">
                  <img :src="'/tid103/g1/images/Sp13.jpg'" style="width: 50px" />
                  <label>ç’°ä¿ç­·å­</label>
                </a>
              </div>
              <div class="middle_item2">æš«å®šå„ªæƒ </div>
              <div class="middle_item3">NT$500</div>
              <div class="middle_item4">1</div>
              <div class="middle_item5">NT$500</div>
            </div>

            <div class="si_orderbottom3_R">
              <div class="bottom3_1">
                <span class="pull-left">å°è¨ˆ:</span>
                <span class="pull-right">NT$500</span>
              </div>
              <div class="bottom3_2">
                <span class="pull-left">é‹è²»:</span>
                <span class="pull-right">NT$80</span>
              </div>
              <div class="bottom3_3">
                <span class="pull-left">åˆè¨ˆ:</span>
                <span class="pull-right">NT$580</span>
              </div>
            </div>

            <!-- <div class="si_orderbottom_R">
              <i class="fa-solid fa-angle-down"></i>
            </div> -->
          </div>
        </transition>
      </div>
      <!-- ä¸‹æ–¹ -->
      <div class="si_bottomsection_R">
        <div class="si_order1_R">
          <!-- é¡§å®¢è³‡æ–™ -->
          <section class="Si_customerinfo_R">
            <div class="Si_customerinfo_header">é¡§å®¢è³‡æ–™</div>
            <div class="Si_customerinfo_body">
              <label for="customerName">é¡§å®¢åç¨±</label>
              <input type="text" class="input" v-model="customerName" />
              <p v-if="errors.customerName" class="error">{{ errors.customerName }}</p>

              <label for="email">é›»å­ä¿¡ç®±</label>
              <input type="email" class="input" v-model="email" />
              <p v-if="errors.email" class="error">{{ errors.email }}</p>

              <label for="">é›»è©±è™Ÿç¢¼</label>
              <div class="si_phonenumber_R">
                <div class="si_leftphone_R">
                  <select v-model="countryCode">
                    <option value="TW+886">TW+886</option>
                  </select>
                </div>
                <div class="si_rightphone_R">
                  <input type="text" class="input" v-model="phoneNumber" />
                </div>
              </div>
              <p v-if="errors.phoneNumber" class="error">{{ errors.phoneNumber }}</p>

              <label for="gender">æ€§åˆ¥(é¸å¡«)</label>
              <select id="gender" v-model="gender">
                <option value="">è«‹é¸æ“‡</option>
                <option value="ç”·">ç”·</option>
                <option value="å¥³">å¥³</option>
              </select>

              <!-- <button @click="submitForm">æäº¤</button> -->
            </div>
          </section>
          <!-- é€è²¨è³‡æ–™ -->
          <section class="Si_deliveryinfo_R">
            <div class="Si_deliveryinfo_header">é€è²¨è³‡æ–™</div>
            <div class="Si_deliveryinfo_body">
              <p>å·²é¸æ“‡çš„é€è²¨æ–¹å¼ï¼šæ–°ç«¹ç‰©æµå®…é… / ä¿¡ç”¨å¡ä»˜æ¬¾</p>
              <label class="si_checkbox">
                <input id="si_check" type="checkbox" v-model="isSameAsCustomer" />
                æ”¶ä»¶äººè³‡æ–™èˆ‡é¡§å®¢è³‡æ–™ç›¸åŒ
              </label>
              <label for="recipientName">æ”¶ä»¶äººå§“å</label>
              <input type="text" class="input" v-model="recipientName" :disabled="isSameAsCustomer" />
              <p v-if="errors.recipientName" class="error">{{ errors.recipientName }}</p>

              <label for="recipientEmail">é›»å­ä¿¡ç®±</label>
              <input type="email" class="input" v-model="recipientEmail" :disabled="isSameAsCustomer" />
              <p v-if="errors.recipientEmail" class="error">{{ errors.recipientEmail }}</p>

              <label for="recipientPhone">é›»è©±è™Ÿç¢¼</label>
              <div class="si_phonenumber_R">
                <div class="si_leftphone_R">
                  <select v-model="recipientCountryCode" :disabled="isSameAsCustomer">
                    <option value="TW+886">TW+886</option>
                  </select>
                </div>
                <div class="si_rightphone_R">
                  <input type="text" class="input" v-model="recipientPhone" :disabled="isSameAsCustomer" />
                </div>
              </div>
              <p v-if="errors.recipientPhone" class="error">{{ errors.recipientPhone }}</p>

              <div id="app">
                <div class="si_address">
                  <label for="">åœ°å€</label>
                  <p>é€è²¨åœ°é»:å°ç£</p>
                  <div class="si_aselect">
                    <!-- åŸå¸‚é¸æ“‡ -->
                    <select v-model="selectedCity">
                      <option v-for="city in cities" :value="city.name" :key="city.name">
                        {{ city.name }}
                      </option>
                    </select>
                    <p v-if="errors.selectedCity" class="error">{{ errors.selectedCity }}</p>

                    <!-- å€åŸŸé¸æ“‡ -->
                    <select v-model="selectedDistrict">
                      <option value="">è«‹é¸æ“‡å€åŸŸ</option>
                      <option v-for="district in selectedDistricts" :value="district" :key="district">
                        {{ district }}
                      </option>
                    </select>
                    <p v-if="errors.selectedDistrict" class="error">{{ errors.selectedDistrict }}</p>
                  </div>
                  <div class="address2">
                    <input type="text" placeholder="è©³ç´°åœ°å€" class="input" v-model="addressDetail" />
                    <p v-if="errors.addressDetail" class="error">{{ errors.addressDetail }}</p>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
        <!-- ç¬¬äºŒéƒ¨åˆ† -->
        <div class="si_order2_R">
          <!-- è¨‚å–®å‚™è¨» -->
          <section class="Si-ordernotes-R">
            <div class="Si_ordernotes_header">è¨‚å–®å‚™è¨»</div>
            <div class="si_ordernotes_body">
              <textarea id="" placeholder="æœ‰ç”šéº¼æƒ³å‘Šè¨´è³£å®¶å—?"></textarea>
            </div>
          </section>
          <!-- ä»˜æ¬¾è³‡æ–™ -->
          <section class="Si-payment-R">
            <div class="si_payment_header">ä»˜æ¬¾è³‡æ–™</div>
            <div class="si_payment_body">
              <input type="text" v-model="cardNumber" placeholder="å¡è™Ÿ" class="input" />
              <p v-if="errors.cardNumber" class="error">{{ errors.cardNumber }}</p>

              <input type="text" v-model="cardHolder" placeholder="æŒå¡äººå§“å" class="input" />
              <p v-if="errors.cardHolder" class="error">{{ errors.cardHolder }}</p>


              <input type="text" v-model="expirationDate" placeholder="æœ‰æ•ˆæœŸé™(MM/YY)" class="input" />
              <p v-if="errors.expirationDate" class="error">{{ errors.expirationDate }}</p>

              <input type="text" v-model="securityCode" placeholder="å®‰å…¨ç¢¼" class="input" />
              <p v-if="errors.securityCode" class="error">{{ errors.securityCode }}</p>

            </div>
          </section>
        </div>

        <div class="si_order3_R">
          <div class="si_return_R">
            <RouterLink to="/Shop_cart">è¿”å›è³¼ç‰©è»Š</RouterLink>
          </div>
          <!-- ç¬¬ä¸‰éƒ¨åˆ† -->
          <div class="si_reciptout_R">
            <section class="Si_recipt_R">
              <div class="si_recipt_header">ç´¢å–ç™¼ç¥¨</div>
              <div class="si_recipt_body">
                <label for="">ç™¼ç¥¨é¡å‹</label>
                <select id="" name="">
                  <option value="æè´ˆç™¼ç¥¨/é›²ç«¯ç™¼ç¥¨">æè´ˆç™¼ç¥¨/é›²ç«¯ç™¼ç¥¨</option>
                </select>
                <label for="">è¼‰å…·é¡å‹</label>
                <select id="" name="">
                  <option value="">å€‹äººè¼‰å…·</option>
                </select>
              </div>
            </section>
            <!-- <RouterLink to="/shop_finish" class="si_submit_R btn" >æäº¤è¨‚å–®</RouterLink> -->
            <button @click="handleSubmit" class="si_submit_R btn">æäº¤è¨‚å–®èˆ‡ä»˜æ¬¾</button>
          </div>
        </div>
      </div>
    </div>
    <MainFooter></MainFooter>
  </div>
</template>

<script setup>
import { ref, watch, computed } from 'vue'
import { useRouter } from 'vue-router'
import MainFooter from '@/components/layout/MainFooter.vue';
import MainHeader from '@/components/layout/MainHeader.vue';

// -- åŠ å…¥ã€Œå±•é–‹/æ”¶åˆã€é‚è¼¯ --
// const isOpen = ref(false)
// function toggleDetails() {
//   isOpen.value = !isOpen.value
// }
// const router = useRouter();

// å®šç¾©è¡¨å–®è³‡æ–™
const customerName = ref('');
const email = ref('');
const phoneNumber = ref('');
const countryCode = ref('TW+886'); // é è¨­åœ‹ç¢¼
const gender = ref('');


// æ”¶ä»¶äººè³‡æ–™
const recipientName = ref('');
const recipientEmail = ref('');
const recipientPhone = ref('');
const recipientCountryCode = ref('TW+886');

// åœ°å€è³‡æ–™
const selectedCity = ref('');
const selectedDistrict = ref('');
const addressDetail = ref('');
  // å®šç¾©åŸå¸‚å’Œå€åŸŸçš„è³‡æ–™
const cities = ref([
    // {
    //   name: 'å°åŒ—å¸‚',
    //   districts: ['å¤§å®‰å€', 'ä¿¡ç¾©å€', 'ä¸­æ­£å€', 'ä¸­å±±å€']
    // },
    // {
    //   name: 'æ–°åŒ—å¸‚',
    //   districts: ['æ¿æ©‹å€', 'ä¸­å’Œå€', 'æ°¸å’Œå€', 'æ–°åº—å€']
    // },
    // {
    //   name: 'å°ä¸­å¸‚',
    //   districts: ['è¥¿å±¯å€', 'åŒ—å±¯å€', 'å—å±¯å€', 'ä¸­å€']
    // }
    {
          name: "å°åŒ—å¸‚",
          districts: ["ä¸­æ­£å€", "å¤§åŒå€", "ä¸­å±±å€", "æ¾å±±å€", "å¤§å®‰å€", "è¬è¯å€", "ä¿¡ç¾©å€", "å£«æ—å€", "åŒ—æŠ•å€", "å…§æ¹–å€", "å—æ¸¯å€", "æ–‡å±±å€"]
        },
        {
          name: "æ–°åŒ—å¸‚",
          districts: ["æ¿æ©‹å€", "æ–°èŠå€", "ä¸­å’Œå€", "æ°¸å’Œå€", "ä¸‰å³¡å€", "æ·¡æ°´å€", "æ±æ­¢å€", "ç‘èŠ³å€", "åœŸåŸå€", "ä¸‰å³°å€", "æ–°åº—å€", "åªæ—å€", "æ—å£å€", "è˜†æ´²å€", "äº”è‚¡å€", "å…«é‡Œå€", "æ·±å‘å€", "ä¸‰èŠå€", "çŸ³ç¢‡å€", "é«˜é›„å€", "æ¿æ©‹å€", "ç‘é‡‘å€", "å¹³æºªå€", "é›™æºªå€", "è²¢å¯®å€"]
        },
        {
          name: "æ¡ƒåœ’å¸‚",
          districts: ["æ¡ƒåœ’å€", "ä¸­å£¢å€", "å¤§æºªå€", "æ¥Šæ¢…å€", "è˜†ç«¹å€", "å¤§åœ’å€", "é¾æ½­å€", "å¹³é®å€", "å…«å¾·å€", "è§€éŸ³å€", "é¾œå±±å€", "å…«å¾·å€"]
        },
        {
          name: "å°ä¸­å¸‚",
          districts: ["ä¸­å€", "æ±å€", "å—å€", "è¥¿å€", "åŒ—å€", "åŒ—å±¯å€", "è¥¿å±¯å€", "å—å±¯å€", "å¤ªå¹³å€", "å¤§é‡Œå€", "éœ§å³°å€", "çƒæ—¥å€", "è±åŸå€", "åé‡Œå€", "çŸ³å²¡å€", "æ±å‹¢å€", "å’Œå¹³å€", "æ–°ç¤¾å€", "æ½­å­å€", "å¤§é›…å€", "ç¥å²¡å€", "å¤§è‚šå€", "æ²™é¹¿å€", "é¾äº•å€", "æ¢§æ£²å€", "æ¸…æ°´å€", "å¤§ç”²å€", "å¤–åŸ”å€", "å¤§å®‰å€"]
        },
        {
          name: "å°å—å¸‚",
          districts: ["ä¸­è¥¿å€", "æ±å€", "å—å€", "åŒ—å€", "å®‰å¹³å€", "å®‰å—å€", "æ°¸åº·å€", "æ­¸ä»å€", "æ–°åŒ–å€", "å·¦é®å€", "ç‰äº•å€", "æ¥ è¥¿å€", "å—åŒ–å€", "ä»å¾·å€", "é—œå»Ÿå€", "é¾å´å€", "å®˜ç”°å€", "éº»è±†å€", "ä½³é‡Œå€", "è¥¿æ¸¯å€", "ä¸ƒè‚¡å€", "å°‡è»å€", "å­¸ç”²å€", "åŒ—é–€å€", "æ–°ç‡Ÿå€", "å¾Œå£å€", "ç™½æ²³å€", "æ±å±±å€", "å…­ç”²å€", "ä¸‹ç‡Ÿå€", "æŸ³ç‡Ÿå€", "é¹½æ°´å€", "å–„åŒ–å€", "å¤§å…§å€", "æ–°å¸‚å€", "å±±ä¸Šå€", "å®‰å®šå€"]
        },
        {
          name: "é«˜é›„å¸‚",
          districts: ["é¹½åŸ•å€", "é¼“å±±å€", "å·¦ç‡Ÿå€", "æ¥ æ¢“å€", "ä¸‰æ°‘å€", "æ–°èˆˆå€", "å‰é‡‘å€", "è‹“é›…å€", "å‰é®å€", "æ——æ´¥å€", "å°æ¸¯å€", "é³³å±±å€", "æ—åœ’å€", "å¤§å¯®å€", "å¤§æ¨¹å€", "å¤§ç¤¾å€", "ä»æ­¦å€", "é³¥æ¾å€", "å²¡å±±å€", "æ©‹é ­å€", "ç‡•å·¢å€", "ç”°å¯®å€", "é˜¿è“®å€", "è·¯ç«¹å€", "æ¹–å…§å€", "èŒ„è£å€", "æ°¸å®‰å€", "å½Œé™€å€", "æ¢“å®˜å€", "æ——å±±å€", "ç¾æ¿ƒå€", "å…­é¾œå€", "ç”²ä»™å€", "æ‰æ—å€", "å…§é–€å€", "èŒ‚æ—å€", "æ¡ƒæºå€", "é‚£ç‘ªå¤å€"]
        },
        {
          name: "åŸºéš†å¸‚",
          districts: ["ä¸­æ­£å€", "ä¸ƒå µå€", "æš–æš–å€", "ä»æ„›å€", "ä¸­å±±å€", "å®‰æ¨‚å€", "ä¿¡ç¾©å€"]
        },
        {
          name: "æ–°ç«¹å¸‚",
          districts: ["æ±å€", "åŒ—å€", "é¦™å±±å€"]
        },
        {
          name: "å˜‰ç¾©å¸‚",
          districts: ["æ±å€", "è¥¿å€"]
        },
        {
          name: "æ–°ç«¹ç¸£",
          districts: ["åŒ—å€", "é¦™å±±å€", "ç«¹åŒ—å¸‚", "æ¹–å£é„‰", "æ–°è±é„‰", "èŠæ—é„‰", "é—œè¥¿é®", "äº”å³°é„‰", "å…«é‡Œå€", "æ©«å±±é„‰", "å³¨çœ‰é„‰", "å¯¶å±±é„‰", "å°–çŸ³é„‰", "åŒ—åŸ”é„‰", "æ¨ªå±±ä¹¡", "ç«¹ä¸œé•‡"]
        },
        {
          name: "è‹—æ —ç¸£",
          districts: ["è‹—æ —å¸‚", "è‹‘è£¡é®", "é€šéœ„é®", "ä¸‰ç¾©é„‰", "å“è˜­é®", "ç«¹å—é®", "å¤§æ¹–é„‰", "å—åº„é„‰", "å¤§è‚šé„‰", "é ­ä»½å¸‚", "ç…æ½­é„‰", "è¥¿æ¹–é„‰", "é ­å±‹é„‰", "å…¬é¤¨é„‰", "éŠ…é‘¼é„‰", "è‡ºä¸­å¸‚", "å¾Œé¾é®", "é€ æ©‹é„‰"]
        },
        {
          name: "å½°åŒ–ç¸£",
          districts: ["å½°åŒ–å¸‚", "èŠ¬åœ’é„‰", "èŠ±å£‡é„‰", "ç§€æ°´é„‰", "é¹¿æ¸¯é®", "ç¦èˆˆé„‰", "ç·šè¥¿é„‰", "å’Œç¾é®", "ä¼¸æ¸¯é„‰", "å“¡æ—å¸‚", "ç¤¾é ­é„‰", "æ°¸é–é„‰", "åŸ”å¿ƒé„‰", "æºªæ¹–é®", "å¤§æ‘é„‰", "åŸ”é¹½é„‰", "ç”°ä¸­é®", "åŒ—æ–—é®", "ç”°å°¾é„‰", "åŸ¤é ­é„‰", "æºªå·é„‰", "ç«¹å¡˜é„‰", "äºŒæ—é®", "å¤§åŸé„‰", "èŠ³è‹‘é„‰", "äºŒæ°´é„‰"]
        },
        {
          name: "å—æŠ•ç¸£",
          districts: ["å—æŠ•å¸‚", "ä¸­å¯®é„‰", "è‰å±¯é®", "åœ‹å§“é„‰", "åŸ”é‡Œé®", "ä»æ„›é„‰", "åé–“é„‰", "é›†é›†é®", "æ°´é‡Œé„‰", "é­šæ± é„‰", "ä¿¡ç¾©é„‰", "ç«¹å±±é®", "é¹¿è°·é„‰"]
        },
        {
          name: "é›²æ—ç¸£",
          districts: ["æ–—å…­å¸‚", "æ–—å—é®", "è™å°¾é®", "è¥¿èºé®", "å¤å‘é„‰", "å¤§åŸ¤é„‰", "è¿æ¡é„‰", "äºŒå´™é„‰", "å´™èƒŒé„‰", "éº¥å¯®é„‰", "è‡ºè¥¿é„‰", "æ±å‹¢é„‰", "è¤’å¿ é„‰", "æœ´å­å¸‚", "å¤ªä¿å¸‚", "å¸ƒè¢‹é®"]
        },
        {
          name: "å˜‰ç¾©ç¸£",
          districts: ["å˜‰ç¾©å¸‚", "ç•ªè·¯é„‰", "æ¢…å±±é„‰", "ç«¹å´é„‰", "é˜¿é‡Œå±±é„‰", "ä¸­åŸ”é„‰", "å¤§åŸ”é„‰", "æ°´ä¸Šé„‰", "é¹¿è‰é„‰", "å¤ªä¿å¸‚", "æœ´å­å¸‚", "æ±çŸ³é„‰", "å…­è…³é„‰", "æ–°æ¸¯é„‰", "æ°‘é›„é„‰", "å¤§æ—é®", "æºªå£é„‰", "ç¾©ç«¹é„‰", "å¸ƒè¢‹é®"]
        },
        {
          name: "å±æ±ç¸£",
          districts: ["å±æ±å¸‚", "ä¸‰åœ°é–€é„‰", "éœ§å°é„‰", "ç‘ªå®¶é„‰", "ä¹å¦‚é„‰", "é‡Œæ¸¯é„‰", "é«˜æ¨¹é„‰", "é¹½åŸ”é„‰", "é•·æ²»é„‰", "éºŸæ´›é„‰", "ç«¹ç”°é„‰", "å…§åŸ”é„‰", "è¬ä¸¹é„‰", "æ½®å·é®", "æ³°æ­¦é„‰", "ä¾†ç¾©é„‰", "è¬å·’é„‰", "å´é ‚é„‰", "æ–°åŸ¤é„‰", "å—å·é„‰", "æ—é‚Šé„‰", "æ±æ¸¯é®", "ç‰çƒé„‰", "ä½³å†¬é„‰", "æ–°åœ’é„‰", "æ‹å±±é„‰", "æ»¿å·é„‰"]
        },
        {
          name: "å®œè˜­ç¸£",
          districts: ["å®œè˜­å¸‚", "é ­åŸé®", "ç¤æºªé„‰", "å£¯åœé„‰", "å“¡å±±é„‰", "ç¾…æ±é®", "ä¸‰æ˜Ÿé„‰", "å¤§åŒé„‰", "äº”çµé„‰", "å†¬å±±é„‰", "è˜‡æ¾³é®", "å—æ¾³é„‰", "é‡£é­šå°"]
        },
        {
          name: "èŠ±è“®ç¸£",
          districts: ["èŠ±è“®å¸‚", "æ–°åŸé„‰", "ç§€æ—é„‰", "å‰å®‰é„‰", "å£½è±é„‰", "é³³æ—é„‰", "å…‰å¾©é„‰", "è±æ¿±é„‰", "ç‘ç©—é„‰", "è¬æ¦®é„‰", "ç‰é‡Œé®", "å“æºªé„‰", "å¯Œé‡Œé„‰"]
        },
        {
          name: "å°æ±ç¸£",
          districts: ["å°æ±å¸‚", "ç¶ å³¶é„‰", "è˜­å¶¼é„‰", "å»¶å¹³é„‰", "å‘å—é„‰", "é¹¿é‡é„‰", "é—œå±±é®", "æµ·ç«¯é„‰", "æ± ä¸Šé„‰", "æ±æ²³é„‰", "æˆåŠŸé„‰", "é•·æ¿±é„‰", "å¤ªéº»é‡Œé„‰", "é‡‘å³°é„‰", "å¤§æ­¦é„‰", "é”ä»é„‰"]
        },
        {
          name: "é‡‘é–€ç¸£",
          districts: ["é‡‘åŸé®", "é‡‘æ¹–é®", "é‡‘æ²™é®", "é‡‘å¯§é„‰", "çƒˆå¶¼é„‰", "çƒåµé„‰"]
        },
        {
          name: "é€£æ±Ÿç¸£",
          districts: ["å—ç«¿é„‰", "åŒ—ç«¿é„‰", "è’å…‰é„‰", "æ±å¼•é„‰"]
        },

  ]);

  // æ ¹æ“šé¸æ“‡çš„åŸå¸‚å–å¾—å°æ‡‰å€åŸŸ
  const selectedDistricts = computed(() => {
    const city = cities.value.find(c => c.name === selectedCity.value);
    return city ? city.districts : [];
  });

  // ä»˜æ¬¾è³‡æ–™
  const cardNumber = ref('');
  const cardHolder = ref('');
  const expirationDate = ref('');
  const securityCode = ref('');

  const errors = ref({});

  // é©—è­‰è¡¨å–®
  const validateForm = () => {
    errors.value = {};

    // é©—è­‰é¡§å®¢åç¨±
    if (!customerName.value.trim()) {
      errors.value.customerName = 'é¡§å®¢åç¨±ç‚ºå¿…å¡«';
    } else if (customerName.value.trim().length < 2) {
      errors.value.customerName = 'é¡§å®¢åç¨±è‡³å°‘ 2 å€‹å­—';
    }

    // é©—è­‰é›»å­éƒµä»¶
    if (!email.value.trim()) {
      errors.value.email = 'é›»å­ä¿¡ç®±ç‚ºå¿…å¡«';
    } else if (!/^\S+@\S+\.\S+$/.test(email.value.trim())) {
      errors.value.email = 'è«‹è¼¸å…¥æœ‰æ•ˆçš„é›»å­éƒµä»¶';
    }

    // é©—è­‰é›»è©±è™Ÿç¢¼
    if (!phoneNumber.value.trim()) {
      errors.value.phoneNumber = 'é›»è©±è™Ÿç¢¼ç‚ºå¿…å¡«';
    } else if (!/^\d{9,}$/.test(phoneNumber.value.trim())) {
      errors.value.phoneNumber = 'è«‹è¼¸å…¥æœ‰æ•ˆçš„é›»è©±è™Ÿç¢¼ï¼ˆè‡³å°‘ 9 ç¢¼æ•¸å­—ï¼‰';
    }

    // æ”¶ä»¶äººå§“åé©—è­‰
    if (!recipientName.value.trim()) {
        errors.value.recipientName = 'æ”¶ä»¶äººå§“åç‚ºå¿…å¡«';
      }else if (recipientName.value.trim().length < 2) {
        errors.value.recipientName = 'é¡§å®¢åç¨±è‡³å°‘ 2 å€‹å­—';
      }

    // æ”¶ä»¶äººé›»å­éƒµä»¶é©—è­‰
    if (!recipientEmail.value.trim()) {
      errors.value.recipientEmail = 'æ”¶ä»¶äººé›»å­ä¿¡ç®±ç‚ºå¿…å¡«';
    } else if (!/^\S+@\S+\.\S+$/.test(recipientEmail.value.trim())) {
      errors.value.recipientEmail = 'è«‹è¼¸å…¥æœ‰æ•ˆçš„é›»å­éƒµä»¶';
    }

    // æ”¶ä»¶äººé›»è©±è™Ÿç¢¼é©—è­‰
    if (!recipientPhone.value.trim()) {
      errors.value.recipientPhone = 'æ”¶ä»¶äººé›»è©±è™Ÿç¢¼ç‚ºå¿…å¡«';
    } else if (!/^\d{9,}$/.test(recipientPhone.value.trim())) {
      errors.value.recipientPhone = 'è«‹è¼¸å…¥æœ‰æ•ˆçš„é›»è©±è™Ÿç¢¼ï¼ˆè‡³å°‘ 9 ç¢¼æ•¸å­—ï¼‰';
    }

        // åœ°å€é©—è­‰
      if (!selectedCity.value) {
        errors.value.selectedCity = 'è«‹é¸æ“‡åŸå¸‚';
      }
      if (!selectedDistrict.value) {
        errors.value.selectedDistrict = 'è«‹é¸æ“‡å€åŸŸ';
      }
      if (!addressDetail.value.trim()) {
        errors.value.addressDetail = 'è«‹è¼¸å…¥è©³ç´°åœ°å€';
      }else if (!/^[\u4e00-\u9fa5a-zA-Z0-9\s\-,.]{5,}$/.test(addressDetail.value.trim())) {
      errors.value.addressDetail = 'åœ°å€æ ¼å¼éŒ¯èª¤ï¼Œè‡³å°‘ 5 å€‹å­—ï¼Œåƒ…å…è¨±ä¸­æ–‡ã€è‹±æ–‡ã€æ•¸å­—åŠéƒ¨åˆ†ç¬¦è™Ÿ';
      }
      console.log(errors.value);
    // å›å‚³æ˜¯å¦é€šéé©—è­‰
    return Object.keys(errors.value).length === 0;
  };

// æ˜¯å¦å‹¾é¸ã€Œæ”¶ä»¶äººè³‡æ–™èˆ‡é¡§å®¢è³‡æ–™ç›¸åŒã€
const isSameAsCustomer = ref(false);

// ç›£è½ checkbox ç‹€æ…‹è®ŠåŒ–
watch(isSameAsCustomer, (newValue) => {
  if (newValue) {
    // ç•¶å‹¾é¸æ™‚ï¼Œå°‡é¡§å®¢è³‡æ–™è¤‡è£½åˆ°æ”¶ä»¶äººæ¬„ä½
    recipientName.value = customerName.value;
    recipientEmail.value = email.value;
    recipientPhone.value = phoneNumber.value;
    recipientCountryCode.value = countryCode.value;
  } else {
    // å–æ¶ˆå‹¾é¸æ™‚ï¼Œæ¸…ç©ºæ”¶ä»¶äººæ¬„ä½
    recipientName.value = '';
    recipientEmail.value = '';
    recipientPhone.value = '';
    recipientCountryCode.value = 'TW+886';
  }
});
  // é©—è­‰ä»˜æ¬¾è³‡è¨Š
  const validatePayment = () => {


      // ä¿¡ç”¨å¡å¡è™Ÿé©—è­‰ï¼ˆ16 ç¢¼æ•¸å­—ï¼‰
      if (!cardNumber.value.trim()) {
        errors.value.cardNumber = 'å¡è™Ÿç‚ºå¿…å¡«';
      } else if (!/^\d{16}$/.test(cardNumber.value.trim())) {
        errors.value.cardNumber = 'è«‹è¼¸å…¥ 16 ç¢¼æœ‰æ•ˆçš„ä¿¡ç”¨å¡è™Ÿ';
      }

      // æŒå¡äººå§“åé©—è­‰ï¼ˆè‡³å°‘ 2 å€‹å­—ï¼Œåƒ…å…è¨±è‹±æ–‡å­—æ¯èˆ‡ç©ºæ ¼ï¼‰
      if (!cardHolder.value.trim()) {
        errors.value.cardHolder = 'æŒå¡äººå§“åç‚ºå¿…å¡«';
      } else if (!/^[A-Za-z\s]{2,}$/.test(cardHolder.value.trim())) {
        errors.value.cardHolder = 'è«‹è¼¸å…¥æœ‰æ•ˆçš„æŒå¡äººå§“åï¼ˆåƒ…å…è¨±è‹±æ–‡å­—æ¯èˆ‡ç©ºæ ¼ï¼‰';
      }

      // æœ‰æ•ˆæœŸé™é©—è­‰ï¼ˆæ ¼å¼ MM/YYï¼Œä¸”éœ€ç‚ºæœªä¾†æ—¥æœŸï¼‰
      if (!expirationDate.value.trim()) {
        errors.value.expirationDate = 'æœ‰æ•ˆæœŸé™ç‚ºå¿…å¡«';
      } else if (!/^(0[1-9]|1[0-2])\/\d{2}$/.test(expirationDate.value.trim())) {
        errors.value.expirationDate = 'è«‹è¼¸å…¥æ­£ç¢ºçš„æœ‰æ•ˆæœŸé™æ ¼å¼ï¼ˆMM/YYï¼‰';
      } else {
        const [month, year] = expirationDate.value.split('/').map(Number);
        const currentYear = new Date().getFullYear() % 100; // å–å…©ä½æ•¸å¹´ä»½
        const currentMonth = new Date().getMonth() + 1;

      if (year < currentYear || (year === currentYear && month < currentMonth)) {
        errors.value.expirationDate = 'æœ‰æ•ˆæœŸé™éœ€ç‚ºæœªä¾†æ—¥æœŸ';
      }
    }

    // å®‰å…¨ç¢¼é©—è­‰ï¼ˆ3-4 ç¢¼æ•¸å­—ï¼‰
    if (!securityCode.value.trim()) {
      errors.value.securityCode = 'å®‰å…¨ç¢¼ç‚ºå¿…å¡«';
    } else if (!/^\d{3,4}$/.test(securityCode.value.trim())) {
      errors.value.securityCode = 'è«‹è¼¸å…¥ 3 æˆ– 4 ç¢¼æ•¸å­—çš„å®‰å…¨ç¢¼';
    }
    console.log(errors.value);
    return Object.keys(errors.value).length === 0;
  };
  // å‡è¨­å·²ç¶“æœ‰ `submitForm` å’Œ `submitPayment`
  const submitForm = () => {
        // errors.value = {}; // æ¸…ç©ºéŒ¯èª¤è¨Šæ¯
          if (validateForm()) {
          return true; // è¨‚å–®è³‡è¨Šæ­£ç¢º
        } else {
          alert('ğŸŒ è«‹æª¢æŸ¥è¨‚å–®è³‡æ–™æ˜¯å¦æ­£ç¢ºï¼');
          return false; // è¨‚å–®æœ‰éŒ¯èª¤
        }
    };

    // å‡è¨­é€™æ˜¯ä»˜æ¬¾è³‡è¨Šé©—è­‰
  const submitPayment = () => {
      // errors.value = {}; // æ¸…ç©ºéŒ¯èª¤è¨Šæ¯
      if (validatePayment()) {
      return true; // ä»˜æ¬¾è³‡è¨Šæ­£ç¢º
    } else {
      alert('ğŸŒ è«‹æª¢æŸ¥ä»˜æ¬¾è³‡æ–™æ˜¯å¦å®Œæ•´ï¼');
      return false; // ä»˜æ¬¾è³‡æ–™æœ‰éŒ¯èª¤
    }
  };

  // **ç¶œåˆæäº¤æ–¹æ³•**
  const handleSubmit = () => {
      const formValid = validateForm();
      const paymentValid = validatePayment();
      console.log(errors.value);
      if (formValid && paymentValid) {
      alert('â˜˜ï¸ è¨‚å–®èˆ‡ä»˜æ¬¾æˆåŠŸï¼');
      router.push('/shop_finish'); // æˆåŠŸå¾Œå°å‘è¨‚å–®å®Œæˆé é¢
      } else {
      alert('ğŸŒ è«‹ä¿®æ­£éŒ¯èª¤å¾Œå†æäº¤');
      }
    };
//   // æäº¤ä»˜æ¬¾è³‡æ–™
//   const submitPayment = () => {
//       if (validatePayment()) {
//         alert('ä»˜æ¬¾è³‡æ–™é©—è­‰æˆåŠŸï¼');
//         router.push('/shop_finish'); // é©—è­‰æˆåŠŸå¾Œè·³è½‰
//       } else {
//         alert('è«‹ä¿®æ­£ä»˜æ¬¾è³‡æ–™éŒ¯èª¤');
//       }
//   };


// // æäº¤è¡¨å–®
// const submitForm = () => {
//   if (validateForm()) {
//     alert('è¡¨å–®æäº¤æˆåŠŸï¼');


//      // è·³è½‰è‡³è¨‚å–®å®Œæˆé é¢
//      router.push('/shop_finish');
//   } else {
//     alert('è«‹ä¿®æ­£è¡¨å–®éŒ¯èª¤');
//   }
// };


</script>
